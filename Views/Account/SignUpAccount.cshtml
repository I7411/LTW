@model Library_Management.Models.SignUpViewModel
@{
    ViewBag.Title = "SignUpAccount";
    Layout = null;
}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <title>Đăng ký tài khoản đọc giả</title>
    <link rel="icon" type="image/png" href="~/wwwroot/Images/logoCongThuong.png" />
    <link rel="stylesheet" href="~/wwwroot/css/dangkycapthe.css" />
    <style>
        b {
            color: red;
        }

        strong {
            font-size: 20px;
        }
    </style>
</head>
<body>
    <header style="position:relative">
        <img src="~/wwwroot/Images/Logo.jpg" alt="Logo" />
    </header>
    @if (TempData["Notice"] != null)
    {
        <div id="Notice" style="display: flex; align-items: center; justify-content: center;
                            position: absolute; top: 20px; left: 50%; transform: translateX(-50%);
                            padding: 10px 20px; color: white; background-color: red;
                            height: auto; max-width: 90%; z-index: 1000;
                            border-radius: 5px; font-weight: bold;">
            @TempData["Notice"]
        </div>
    }
    <div class="container">
        @using (Html.BeginForm("SignUpAccount", "Account", FormMethod.Post, new { id = "formInput" }))
        {

            @Html.AntiForgeryToken()
            <div class="thongtinchung">
                <strong>Thông tin chung</strong>
                <hr />
                <table style="width: 100%">
                    <tr>
                        <td rowspan="5">
                            <img style="width: 200px" src="../Images/cat.jpg" alt="" />
                        </td>
                    </tr>
                    <tr>
                        <td>CCCD/MSSV:<b>*</b></td>
                        <td>
                            @Html.TextBoxFor(m => m.MaSo, new { style = "width: 70%" })
                            @Html.ValidationMessageFor(m => m.MaSo, "", new { @style = "color:red;" })
                        </td>
                    </tr>

                    <tr>
                        <td>Họ và tên:<b>*</b></td>
                        <td>
                            @Html.TextBoxFor(m => m.HoTen, new { style = "width: 70%" })
                            @Html.ValidationMessageFor(m => m.HoTen, "", new { @style = "color:red;" })
                        </td>
                    </tr>

                    <tr>
                        <td>Ngày sinh:<b>*</b></td>
                        <td>
                            @Html.TextBoxFor(m => m.NgaySinh, "{0:yyyy-MM-dd}", new { type = "date", style = "width: 70%" })
                            @Html.ValidationMessageFor(m => m.NgaySinh, "", new { @style = "color:red;" })
                        </td>
                    </tr>

                    <tr>
                        <td>Giới tính:<b>*</b></td>
                        <td>
                            @Html.DropDownListFor(m => m.GioiTinh, new SelectList(new[] { "Nam", "Nữ", "Khác" }), "-- Chọn giới tính --", new { style = "width: 50%" })
                            @Html.ValidationMessageFor(m => m.GioiTinh, "", new { @style = "color:red;" })
                        </td>
                    </tr>
                </table>
            </div>
            <div class="thongtinlienhe">
                <strong>Thông tin liên hệ</strong>
                <hr />
                <table>
                    <tr>
                        <td>Địa chỉ:</td>
                        <td>
                            @Html.TextBoxFor(m => m.DiaChi, new { style = "width: 70%" })
                        </td>
                    </tr>

                    <tr>
                        <td>Đối tượng:</td>
                        <td>
                            @Html.TextBoxFor(m => m.DoiTuong, new { style = "width: 70%" })
                        </td>
                    </tr>

                    <tr>
                        <td>Chức vụ:</td>
                        <td>
                            @Html.TextBoxFor(m => m.ChucVu, new { style = "width: 70%" })
                        </td>
                    </tr>

                    <tr>
                        <td>Tên trường:</td>
                        <td>
                            @Html.TextBoxFor(m => m.TenTruong, new { style = "width: 70%" })
                        </td>
                    </tr>

                    <tr>
                        <td>Khóa học:</td>
                        <td>
                            @Html.TextBoxFor(m => m.KhoaHoc, new { style = "width: 70%" })
                        </td>
                    </tr>

                    <tr>
                        <td>Email:</td>
                        <td>
                            @Html.TextBoxFor(m => m.Email, new { style = "width: 70%" })
                            @Html.ValidationMessageFor(m => m.Email, "", new { @style = "color:red;" })
                        </td>
                    </tr>

                    <tr>
                        <td>Điện thoại:</td>
                        <td>
                            @Html.TextBoxFor(m => m.DienThoai, new { style = "width: 70%" })
                            @Html.ValidationMessageFor(m => m.DienThoai, "", new { @style = "color:red;" })
                        </td>
                    </tr>
                    <tr>
                        <td>Ghi chú:</td>
                        <td>
                            @Html.TextAreaFor(m => m.GhiChu, new { style = "width: 70%" })
                        </td>
                    </tr>

                </table>
            </div>
            <div class="thongtintaikhoan">
                <strong>Thông tin tài khoản:</strong>
                <hr />
                <table>


                    <tr>
                        <td>Mật khẩu:<b>*</b></td>
                        <td>
                            @Html.PasswordFor(m => m.MatKhau, new { style = "width: 70%" })
                            @Html.ValidationMessageFor(m => m.MatKhau, "", new { @style = "color:red;" })
                        </td>
                    </tr>

                    <tr>
                        <td>Nhập lại mật khẩu:<b>*</b></td>
                        <td>
                            @Html.PasswordFor(m => m.NhapLaiMatKhau, new { style = "width: 70%" })
                            @Html.ValidationMessageFor(m => m.NhapLaiMatKhau, "", new { @style = "color:red;" })
                        </td>
                    </tr>

                </table>
            </div>

            <div class="button">
                <button type="submit">Đăng ký</button>
                <button style="width: 50px"
                        type="button"
                        onclick="location.href = '@Url.Action("Login","Account")'">
                    Hủy
                </button>
            </div>
        }
    </div>
    <footer>
        <strong>Trung tâm Thông tin - Thư viện Đại Học </strong>
        <p>
            Trường Đại Học Công Thương TP.HCM<br />
            Địa chỉ liên hệ: 140 Lê Trọng Tấn, Tân Phú, TP. Hồ Chí Minh, Việt Nam<br />
            Điện thoại: 028 3816 1673 - 137<br />
            Email: thuvien@huit.edu.vn<br />
            Hotline: 097 117 3837
        </p>
    </footer>

    <script>
        setTimeout(function () {
            var alert = document.getElementById('Notice');
            if (alert) {
                alert.style.display = 'none';
            }
        }, 3000);
        //
        const form = document.getElementById("formInput");
        const maso = document.getElementById("maso");
        const hoten = document.getElementById("hoten");
        const mk = document.getElementById("mk");
        const lmk = document.getElementById("lmk");
        const ngaysinh = document.getElementById("ngaysinh");

        maso.addEventListener("input", function () {
            if (maso.value.length !== 10 && maso.value.length !== 13) {
                maso.style.border = "3px solid red";
            } else {
                maso.style.border = "";
            }
        });

        form.addEventListener("submit", function (event) {
            let errors = [];

            if (!maso.value || (maso.value.length !== 10 && maso.value.length !== 13)) {
                errors.push("Mã số không được để trống và phải có độ dài 10 hoặc 13 ký tự");
                maso.style.border = "3px solid red";
            } else {
                maso.style.border = "";
            }

            if (!hoten.value) {
                errors.push("Họ và tên không được để trống");
                hoten.style.border = "3px solid red";
            } else {
                hoten.style.border = "";
            }

            if (!ngaysinh.value) {
                errors.push("Ngày sinh không được để trống");
                ngaysinh.style.border = "3px solid red";
            } else {
                ngaysinh.style.border = "";
            }

            var sex = document.querySelector('input[name="gioitinh"]:checked');
            const gioiTinhGroup = document.getElementById("gioitinh-group");
            if (sex == null) {
                errors.push("Giới tính không được để trống");
                if (gioiTinhGroup) {
                    gioiTinhGroup.style.border = "3px solid red";
                }
            } else {
                if (gioiTinhGroup) {
                    gioiTinhGroup.style.border = "";
                }
            }

            if (!mk.value) {
                errors.push("Mật khẩu không được để trống");
                mk.style.border = "3px solid red";
            } else {
                mk.style.border = "";
            }

            if (lmk.value !== mk.value) {
                errors.push("Mật khẩu nhập lại không khớp");
                lmk.style.border = "3px solid red";
            } else {
                lmk.style.border = "";
            }

            if (errors.length > 0) {
                event.preventDefault();
                alert(errors.join("\n"));
            }
        });
       
    </script>

</body>
</html>

