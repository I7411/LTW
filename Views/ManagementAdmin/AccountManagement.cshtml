
@{
    ViewBag.Title = "AccountManagement";
    Layout = null;
}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="~/wwwroot/css/ReaderManagement.css" />
    <link rel="stylesheet" href="~/wwwroot/css/MainPage_Admin.css" />
    <link rel="stylesheet" href="~/wwwroot/css/AccountManagement.css">
    <title>Account Management</title>
    <style>
        tr td:first-child {
            width: 150px;
        }

        tr {
            border: solid 1px;
        }

        #add table {
            background-color: lightgray;
            border: none
        }

        #add {
            padding: 10px;
            border: solid 1px black;
        }

            #add td {
                height: 30px;
                ;
            }

            #add h3 {
                font-size: 30px;
                font-family: Arial, Helvetica, sans-serif;
            }
    </style>
</head>
<body>
    <header>
        <div class="logo">
            <div class="imgTitle"><img src="~/wwwroot/Images/Logo.png" alt="" /></div>
            <div class="titleHeader">
                <strong>
                    <img src="~/wwwroot/Images/book.png" alt="" />HỌC HẾT SỨC - CHƠI
                    HẾTMÌNH
                </strong>
                <div class="Search"> <input type="text" name="Search" placeholder="Nhập thông tin cần tìm!"> <button id="Search">Tìm</button></div>
            </div>
        </div>
        <div style="height: 50px;" class="navigation"></div>
    </header>
    <div class="containerManagementAccount">
        <div class="select">
            <label><input type="radio" name="selectItems" value="reader" checked onchange="changeItems()"><span>Tài khoản độc giả</span></label>
            <label><input type="radio" name="selectItems" value="staff" onchange="changeItems()"><span>Tài khoản nhân viên</span></label>
        </div>
        <div class="Info">
            <form id="updateForm" method="post">
                <input type="hidden" id="formType" name="formType" value="reader" />
                <table>
                    <tr>
                        <td>Họ tên:</td>
                        <td colspan="2"><input type="text" id="ten" name="ten" /></td>
                        <td>Email:</td>
                        <td colspan="2"><input type="text" id="email" name="email" /></td>
                    </tr>
                    <tr>
                        <td>Tài khoản:</td>
                        <td colspan="2"><input type="text" id="taikhoan" name="taikhoan" readonly /></td>
                        <td>Mật khẩu:</td>
                        <td colspan="2"><input type="text" id="matkhau" name="matkhau" /></td>
                    </tr>
                </table>
                <div class="btn">
                    <button type="submit">Cập nhật</button>
                    <button type="button" onclick="location.href = '@Url.Action("AdminHome","Home")'">Thoát</button>
                </div>
            </form>        </div>
        <div class="Infotable">
            <div class="title" id="title"><h2>Thông tin tài khoản độc giả</h2></div>
            <div id="reader">
                <table>
                    <thead>
                        <tr>
                            <th>STT</th>
                            <th>Họ tên</th>
                            <th>Tài khoản</th>
                            <th>Mật khẩu</th>
                            <th>Email</th>
                        </tr>
                    </thead>
                    <tbody>
                        @{
                            var Database = new Library_Management.Models.QUANLYTHUVIENEntities();
                            var d = Database.DOCGIAs;
                            int stt = 1;
                            foreach (var item in d)
                            {
                                <tr>
                                    <td>@stt</td>
                                    <td>@item.TENTV</td>
                                    <td>@item.TAIKHOAN</td>
                                    <td>@item.MATKHAU</td>
                                    <td>@item.EMAIL</td>
                                </tr>
                                stt++;
                            }

                        }
                    </tbody>
                </table>

            </div>
            <div id="nhanvien" style="display:none;">
                <table>
                    <thead>
                        <tr>
                            <th>STT</th>
                            <th>Họ tên</th>
                            <th>Tài khoản</th>
                            <th>Mật khẩu</th>
                            <th>Email</th>
                        </tr>
                    </thead>
                    <tbody>
                        @{
                            var nv = Database.NHANVIENs;
                            int st = 1;
                            foreach (var item in nv)
                            {
                                <tr>
                                    <td>@st</td>
                                    <td>@item.TENNV</td>
                                    <td>@item.TAIKHOAN</td>
                                    <td>@item.MATKHAU</td>
                                    <td>@item.EMAIL</td>
                                </tr>
                                st++;
                            }

                        }
                    </tbody>
                </table>


            </div>
        </div>
    </div>
    <script src="@Url.Content("~/wwwroot/JS/jquery-3.3.1.min.js")"></script>

    @*<script src="~/wwwroot/JS/AccountManagement.js">
    </script>*@
    <script>
        function changeItems() {
            const selected = document.querySelector('input[name="selectItems"]:checked').value;
            document.getElementById("formType").value = selected;
            document.getElementById("reader").style.display = selected === "reader" ? "block" : "none";
            document.getElementById("nhanvien").style.display = selected === "staff" ? "block" : "none";
            document.getElementById("title").innerHTML = selected === "reader"
                ? "<h2>Thông tin tài khoản độc giả</h2>"
                : "<h2>Thông tin tài khoản nhân viên</h2>";
        }

        $(".Infotable tbody tr").on("click", function () {
            const ten = $(this).find("td:eq(1)").text().trim();
            const taikhoan = $(this).find("td:eq(2)").text().trim();
            const mk = $(this).find("td:eq(3)").text().trim();
            const email = $(this).find("td:eq(4)").text().trim();

            $("#ten").val(ten);
            $("#taikhoan").val(taikhoan);
            $("#matkhau").val(mk);
            $("#email").val(email);
        });

        $("#updateForm").on("submit", function (e) {
            e.preventDefault();
            const formType = $("#formType").val();
            const actionUrl = formType === "reader" ? "/ManagementAdmin/UpdateReader" : "/ManagementAdmin/UpdateStaff";
            this.action = actionUrl;
            this.submit();
        });

        window.onload = changeItems;
    </script>
</body>
</html>


